<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Conventions · Trixi.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://trixi-framework.github.io/Trixi.jl/stable/conventions.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Trixi.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="overview.html">Overview</a></li><li><a class="tocitem" href="visualization.html">Visualization</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/introduction.html">Introduction</a></li><li><a class="tocitem" href="tutorials/getting_started_with_Trixi.html">1 Getting started with Trixi</a></li><li><a class="tocitem" href="tutorials/scalar_linear_advection_1d.html">2 Introduction to DG methods</a></li><li><a class="tocitem" href="tutorials/DGSEM_FluxDiff.html">3 DGSEM with flux differencing</a></li><li><a class="tocitem" href="tutorials/shock_capturing.html">4 Shock capturing with flux differencing and stage limiter</a></li><li><a class="tocitem" href="tutorials/non_periodic_boundaries.html">5 Non-periodic boundaries</a></li><li><a class="tocitem" href="tutorials/DGMulti_1.html">6 DG schemes via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="tutorials/DGMulti_2.html">7 Other SBP schemes (FD, CGSEM) via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="tutorials/upwind_fdsbp.html">8 Upwind FD SBP schemes</a></li><li><a class="tocitem" href="tutorials/adding_new_scalar_equations.html">9 Adding a new scalar conservation law</a></li><li><a class="tocitem" href="tutorials/adding_nonconservative_equation.html">10 Adding a non-conservative equation</a></li><li><a class="tocitem" href="tutorials/parabolic_terms.html">11 Parabolic terms</a></li><li><a class="tocitem" href="tutorials/adding_new_parabolic_terms.html">12 Adding new parabolic terms</a></li><li><a class="tocitem" href="tutorials/adaptive_mesh_refinement.html">13 Adaptive mesh refinement</a></li><li><a class="tocitem" href="tutorials/structured_mesh_mapping.html">14 Structured mesh with curvilinear mapping</a></li><li><a class="tocitem" href="tutorials/hohqmesh_tutorial.html">15 Unstructured meshes with HOHQMesh.jl</a></li><li><a class="tocitem" href="tutorials/time_stepping.html">16 Explicit time stepping</a></li><li><a class="tocitem" href="tutorials/differentiable_programming.html">17 Differentiable programming</a></li></ul></li><li><span class="tocitem">Basic building blocks</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Meshes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="meshes/tree_mesh.html">Tree mesh</a></li><li><a class="tocitem" href="meshes/structured_mesh.html">Structured mesh</a></li><li><a class="tocitem" href="meshes/unstructured_quad_mesh.html">Unstructured mesh</a></li><li><a class="tocitem" href="meshes/p4est_mesh.html">P4est-based mesh</a></li><li><a class="tocitem" href="meshes/dgmulti_mesh.html">DGMulti mesh</a></li></ul></li><li><a class="tocitem" href="time_integration.html">Time integration</a></li><li><a class="tocitem" href="callbacks.html">Callbacks</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li class="is-active"><a class="tocitem" href="conventions.html">Conventions</a><ul class="internal"><li><a class="tocitem" href="#Spatial-dimensions-and-directions"><span>Spatial dimensions and directions</span></a></li><li><a class="tocitem" href="#Cells-vs.-elements-vs.-nodes"><span>Cells vs. elements vs. nodes</span></a></li><li class="toplevel"><a class="tocitem" href="#Keywords-in-elixirs"><span>Keywords in elixirs</span></a></li><li><a class="tocitem" href="#Variable-names"><span>Variable names</span></a></li><li><a class="tocitem" href="#Array-types-and-wrapping"><span>Array types and wrapping</span></a></li></ul></li><li><a class="tocitem" href="development.html">Development</a></li><li><a class="tocitem" href="github-git.html">GitHub &amp; Git</a></li><li><a class="tocitem" href="styleguide.html">Style guide</a></li><li><a class="tocitem" href="testing.html">Testing</a></li><li><a class="tocitem" href="performance.html">Performance</a></li><li><a class="tocitem" href="parallelization.html">Parallelization</a></li></ul></li><li><a class="tocitem" href="troubleshooting.html">Troubleshooting and FAQ</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="reference-trixi.html">Trixi.jl</a></li><li><a class="tocitem" href="reference-trixi2vtk.html">Trixi2Vtk.jl</a></li></ul></li><li><a class="tocitem" href="authors.html">Authors</a></li><li><a class="tocitem" href="contributing.html">Contributing</a></li><li><a class="tocitem" href="code_of_conduct.html">Code of Conduct</a></li><li><a class="tocitem" href="license.html">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics &amp; developers</a></li><li class="is-active"><a href="conventions.html">Conventions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="conventions.html">Conventions</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com//blob/master/docs/src/conventions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="conventions"><a class="docs-heading-anchor" href="#conventions">Conventions</a><a id="conventions-1"></a><a class="docs-heading-anchor-permalink" href="#conventions" title="Permalink"></a></h1><h2 id="Spatial-dimensions-and-directions"><a class="docs-heading-anchor" href="#Spatial-dimensions-and-directions">Spatial dimensions and directions</a><a id="Spatial-dimensions-and-directions-1"></a><a class="docs-heading-anchor-permalink" href="#Spatial-dimensions-and-directions" title="Permalink"></a></h2><p>We use the following numbering schemes on Cartesian or curved structured meshes.</p><ul><li>The <code>orientation</code>s are numbered as <code>1 =&gt; x, 2 =&gt; y, 3 =&gt; z</code>. For example, numerical fluxes such as <code>flux_central(u_ll, u_rr, orientation, equations::AbstractEquations)</code> use the <code>orientation</code> in this way.</li><li>The <code>direction</code>s are numbered as <code>1 =&gt; -x, 2 =&gt; +x, 3 =&gt; -y, 4 =&gt; +y, 5 =&gt; -z, 6 =&gt; +z</code>. For example, the <code>boundary_conditions</code> are ordered in this way when a <code>Tuple</code> of boundary conditions per direction is passed to the constructor of a <code>SemidiscretizationHyperbolic</code>.</li><li>For structured and unstructured curved meshes the concept of direction is generalized via the variable <code>normal_direction</code>. This variable points in the normal direction at a given, curved surface. For the computation of boundary fluxes the <code>normal_direction</code> is normalized to be a <code>normal_vector</code> used, for example, in <a href="reference-trixi.html#Trixi.FluxRotated"><code>FluxRotated</code></a>.</li></ul><h2 id="Cells-vs.-elements-vs.-nodes"><a class="docs-heading-anchor" href="#Cells-vs.-elements-vs.-nodes">Cells vs. elements vs. nodes</a><a id="Cells-vs.-elements-vs.-nodes-1"></a><a class="docs-heading-anchor-permalink" href="#Cells-vs.-elements-vs.-nodes" title="Permalink"></a></h2><p>To uniquely distinguish between different components of the discretization, we use the following naming conventions:</p><ul><li>The computational domain is discretized by a <code>mesh</code>, which is made up of individual <code>cell</code>s. In general, neither the <code>mesh</code> nor the <code>cell</code>s should be aware of any solver-specific knowledge, i.e., they should not store anything that goes beyond the geometrical information and the connectivity.</li><li>The numerical <code>solver</code>s do not directly store their information inside the <code>mesh</code>, but use own data structures. Specifically, for each <code>cell</code> on which a solver wants to operate, the solver creates an <code>element</code> to store solver-specific data.</li><li>For discretization schemes such as the discontinuous Galerkin or the finite element method, inside each <code>element</code> multiple <code>nodes</code> may be defined, which hold nodal information. The nodes are again a solver-specific component, just like the elements.</li><li>We often identify <code>element</code>s, <code>node</code>s, etc. with their (local or global) integer index. Convenience iterators such as <code>eachelement</code>, <code>eachnode</code> use these indices.</li></ul><h1 id="Keywords-in-elixirs"><a class="docs-heading-anchor" href="#Keywords-in-elixirs">Keywords in elixirs</a><a id="Keywords-in-elixirs-1"></a><a class="docs-heading-anchor-permalink" href="#Keywords-in-elixirs" title="Permalink"></a></h1><p>Trixi.jl is distributed with several examples in the form of elixirs, small Julia scripts containing everything to set up and run a simulation. Working interactively from the Julia REPL with these scripts can be quite convenient while for exploratory research and development of Trixi.jl. For example, you can use the convenience function <a href="reference-trixi.html#Trixi.trixi_include-Tuple{Module, AbstractString}"><code>trixi_include</code></a> to <code>include</code> an elixir with some modified arguments. To enable this, it is helpful to use a consistent naming scheme in elixirs, since <a href="reference-trixi.html#Trixi.trixi_include-Tuple{Module, AbstractString}"><code>trixi_include</code></a> can only perform simple replacements. Some standard variables names are</p><ul><li><code>polydeg</code> for the polynomial degree of a solver</li><li><code>surface_flux</code> for the numerical flux at surfaces</li><li><code>volume_flux</code> for the numerical flux used in flux differencing volume terms</li></ul><p>Moreover, <a href="reference-trixi.html#Trixi.convergence_test-Tuple{Module, AbstractString, Any}"><code>convergence_test</code></a> requires that the spatial resolution is set via the keywords</p><ul><li><code>initial_refinement_level</code> (an integer, e.g. for the <a href="reference-trixi.html#Trixi.TreeMesh"><code>TreeMesh</code></a> and the <a href="reference-trixi.html#Trixi.P4estMesh"><code>P4estMesh</code></a>) or</li><li><code>cells_per_dimension</code> (a tuple of integers, one per spatial dimension, e.g. for the <a href="reference-trixi.html#Trixi.StructuredMesh"><code>StructuredMesh</code></a> and the <a href="reference-trixi.html#Trixi.DGMultiMesh"><code>DGMultiMesh</code></a>).</li></ul><h2 id="Variable-names"><a class="docs-heading-anchor" href="#Variable-names">Variable names</a><a id="Variable-names-1"></a><a class="docs-heading-anchor-permalink" href="#Variable-names" title="Permalink"></a></h2><ul><li>Use descriptive names (using <code>snake_case</code> for variables/functions and <code>CamelCase</code> for types)</li><li>Use a suffix <code>_</code> as in <code>name_</code> for local variables that would otherwise hide existing symbols.</li><li>Use a prefix <code>_</code> as in <code>_name</code> to indicate internal methods/data that are &quot;fragile&quot; in the sense that there&#39;s no guarantee that they might get changed without notice. These are also not documented with a docstring (but maybe with comments using <code>#</code>).</li></ul><h2 id="Array-types-and-wrapping"><a class="docs-heading-anchor" href="#Array-types-and-wrapping">Array types and wrapping</a><a id="Array-types-and-wrapping-1"></a><a class="docs-heading-anchor-permalink" href="#Array-types-and-wrapping" title="Permalink"></a></h2><p>To allow adaptive mesh refinement efficiently when using time integrators from <a href="https://github.com/SciML/OrdinaryDiffEq.jl">OrdinaryDiffEq</a>, Trixi allows to represent numerical solutions in two different ways. Some discussion can be found <a href="https://github.com/SciML/OrdinaryDiffEq.jl/pull/1275">online</a> and in form of comments describing <code>Trixi.wrap_array</code> and <code>Trixi.wrap_array_native</code> in the source code of Trixi. The flexibility introduced by this possible wrapping enables additional <a href="https://github.com/trixi-framework/Trixi.jl/pull/509">performance optimizations</a>. However, it comes at the cost of some additional abstractions (and needs to be used with caution, as described in the source code of Trixi). Thus, we use the following conventions to distinguish between arrays visible to the time integrator and wrapped arrays mainly used internally.</p><ul><li>Arrays visible to the time integrator have a suffix <code>_ode</code>, e.g., <code>du_ode</code>, <code>u_ode</code>.</li><li>Wrapped arrays do not have a suffix, e.g., <code>du, u</code>.</li></ul><p>Methods either accept arrays visible to the time integrator or wrapped arrays based on the following rules.</p><ul><li>When some solution is passed together with a semidiscretization <code>semi</code>, the solution must be a <code>u_ode</code> that needs to be  wrapped via <code>wrap_array(u_ode, semi)</code> (or <code>wrap_array_native(u_ode, semi)</code>) for further processing.</li><li>When some solution is passed together with the <code>mesh, equations, solver, cache, ...</code>, it is already wrapped via <code>wrap_array</code> (or <code>wrap_array_native</code>).</li><li>Exceptions of this rule are possible, e.g. for AMR, but must be documented in the code.</li><li><code>wrap_array</code> should be used as default option. <code>wrap_array_native</code> should only be used when necessary, e.g., to avoid additional overhead when interfacing with external C libraries such as HDF5, MPI, or visualization.</li></ul></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="callbacks.html">« Callbacks</a><a class="docs-footer-nextpage" href="development.html">Development »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 17 April 2023 08:36">Monday 17 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
