<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Testing · Trixi.jl</title><script data-outdated-warner src="assets/warner.js"></script><link rel="canonical" href="https://trixi-framework.github.io/Trixi.jl/stable/testing.html"/><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.045/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.24/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="assets/documenter.js"></script><script src="siteinfo.js"></script><script src="../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="assets/themeswap.js"></script><link href="assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="index.html">Trixi.jl</a></span></div><form class="docs-search" action="search.html"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="index.html">Home</a></li><li><span class="tocitem">Getting started</span><ul><li><a class="tocitem" href="overview.html">Overview</a></li><li><a class="tocitem" href="visualization.html">Visualization</a></li></ul></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="tutorials/introduction.html">Introduction</a></li><li><a class="tocitem" href="tutorials/getting_started_with_Trixi.html">1 Getting started with Trixi</a></li><li><a class="tocitem" href="tutorials/scalar_linear_advection_1d.html">2 Introduction to DG methods</a></li><li><a class="tocitem" href="tutorials/DGSEM_FluxDiff.html">3 DGSEM with flux differencing</a></li><li><a class="tocitem" href="tutorials/shock_capturing.html">4 Shock capturing with flux differencing and stage limiter</a></li><li><a class="tocitem" href="tutorials/non_periodic_boundaries.html">5 Non-periodic boundaries</a></li><li><a class="tocitem" href="tutorials/DGMulti_1.html">6 DG schemes via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="tutorials/DGMulti_2.html">7 Other SBP schemes (FD, CGSEM) via <code>DGMulti</code> solver</a></li><li><a class="tocitem" href="tutorials/upwind_fdsbp.html">8 Upwind FD SBP schemes</a></li><li><a class="tocitem" href="tutorials/adding_new_scalar_equations.html">9 Adding a new scalar conservation law</a></li><li><a class="tocitem" href="tutorials/adding_nonconservative_equation.html">10 Adding a non-conservative equation</a></li><li><a class="tocitem" href="tutorials/parabolic_terms.html">11 Parabolic terms</a></li><li><a class="tocitem" href="tutorials/adding_new_parabolic_terms.html">12 Adding new parabolic terms</a></li><li><a class="tocitem" href="tutorials/adaptive_mesh_refinement.html">13 Adaptive mesh refinement</a></li><li><a class="tocitem" href="tutorials/structured_mesh_mapping.html">14 Structured mesh with curvilinear mapping</a></li><li><a class="tocitem" href="tutorials/hohqmesh_tutorial.html">15 Unstructured meshes with HOHQMesh.jl</a></li><li><a class="tocitem" href="tutorials/time_stepping.html">16 Explicit time stepping</a></li><li><a class="tocitem" href="tutorials/differentiable_programming.html">17 Differentiable programming</a></li></ul></li><li><span class="tocitem">Basic building blocks</span><ul><li><input class="collapse-toggle" id="menuitem-4-1" type="checkbox"/><label class="tocitem" for="menuitem-4-1"><span class="docs-label">Meshes</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="meshes/tree_mesh.html">Tree mesh</a></li><li><a class="tocitem" href="meshes/structured_mesh.html">Structured mesh</a></li><li><a class="tocitem" href="meshes/unstructured_quad_mesh.html">Unstructured mesh</a></li><li><a class="tocitem" href="meshes/p4est_mesh.html">P4est-based mesh</a></li><li><a class="tocitem" href="meshes/dgmulti_mesh.html">DGMulti mesh</a></li></ul></li><li><a class="tocitem" href="time_integration.html">Time integration</a></li><li><a class="tocitem" href="callbacks.html">Callbacks</a></li></ul></li><li><span class="tocitem">Advanced topics &amp; developers</span><ul><li><a class="tocitem" href="conventions.html">Conventions</a></li><li><a class="tocitem" href="development.html">Development</a></li><li><a class="tocitem" href="github-git.html">GitHub &amp; Git</a></li><li><a class="tocitem" href="styleguide.html">Style guide</a></li><li class="is-active"><a class="tocitem" href="testing.html">Testing</a><ul class="internal"><li><a class="tocitem" href="#Testing-setup"><span>Testing setup</span></a></li><li><a class="tocitem" href="#Adding-new-tests"><span>Adding new tests</span></a></li><li><a class="tocitem" href="#Test-coverage"><span>Test coverage</span></a></li></ul></li><li><a class="tocitem" href="performance.html">Performance</a></li><li><a class="tocitem" href="parallelization.html">Parallelization</a></li></ul></li><li><a class="tocitem" href="troubleshooting.html">Troubleshooting and FAQ</a></li><li><span class="tocitem">Reference</span><ul><li><a class="tocitem" href="reference-trixi.html">Trixi.jl</a></li><li><a class="tocitem" href="reference-trixi2vtk.html">Trixi2Vtk.jl</a></li></ul></li><li><a class="tocitem" href="authors.html">Authors</a></li><li><a class="tocitem" href="contributing.html">Contributing</a></li><li><a class="tocitem" href="code_of_conduct.html">Code of Conduct</a></li><li><a class="tocitem" href="license.html">License</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Advanced topics &amp; developers</a></li><li class="is-active"><a href="testing.html">Testing</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href="testing.html">Testing</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com//blob/master/docs/src/testing.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Testing"><a class="docs-heading-anchor" href="#Testing">Testing</a><a id="Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Testing" title="Permalink"></a></h1><p>During the development of Trixi, we rely on <a href="https://en.wikipedia.org/wiki/Continuous_testing">continuous testing</a> to ensure that modifications or new features do not break existing functionality or add other errors. In the main <a href="https://github.com/trixi-framework/Trixi.jl">Trixi</a> repository (and the repositories for the visualization tool <a href="https://github.com/trixi-framework/Trixi.jl">Trixi2Vtk</a>), this is facilitated by <a href="https://docs.github.com/en/free-pro-team@latest/actions">GitHub Actions</a>, which allows to run tests automatically upon certain events. When, how, and what is tested by GitHub Actions is controlled by the workflow file <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/.github/workflows/ci.yml"><code>.github/workflows/ci.yml</code></a>. In Trixi and its related repositories, tests are triggered by</p><ul><li>each <code>git push</code> to <code>main</code> and</li><li>each <code>git push</code> to any pull request.</li></ul><p>Besides checking functionality, we also analyse the <a href="testing.html#Test-coverage">Test coverage</a> to ensure that we do not miss important parts during testing.</p><div class="admonition is-info"><header class="admonition-header">Test and coverage requirements</header><div class="admonition-body"><p>Before merging a pull request (PR) to <code>main</code>, we require that</p><ul><li>the code passes all functional tests</li><li>code coverage does not decrease.</li></ul></div></div><h2 id="Testing-setup"><a class="docs-heading-anchor" href="#Testing-setup">Testing setup</a><a id="Testing-setup-1"></a><a class="docs-heading-anchor-permalink" href="#Testing-setup" title="Permalink"></a></h2><p>The entry point for all testing is the file <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/runtests.jl"><code>test/runtests.jl</code></a>, which is run by the automated tests and which can be triggered manually by executing</p><pre><code class="language-julia hljs">julia&gt; using Pkg; Pkg.test(&quot;Trixi&quot;)</code></pre><p>in the REPL. Since there already exist many tests, we have split them up into multiple files in the <code>test</code> directory to allow for faster testing of individual parts of the code. Thus in addition to performing all tests, you can also just <code>include</code> one of the files named <code>test_xxx.jl</code> to run only a specific subset, e.g.,</p><pre><code class="language-julia hljs">julia&gt; # Run all 2D tests on the P4estMesh
       include(joinpath(&quot;test&quot;, &quot;test_p4est_2d.jl&quot;))

julia&gt; # Run all 1D tests for the Euler equations on the TreeMesh
       include(joinpath(&quot;test&quot;, &quot;test_tree_1d_euler.jl&quot;))</code></pre><p>For the automated tests with GitHub Actions, we run multiple jobs in parallel to reduce the waiting time until all tests are finished. You can see the different components that are run as jobs by looking at the <code>TRIXI_TEST</code> variable in <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/runtests.jl"><code>test/runtests.jl</code></a>.</p><h2 id="Adding-new-tests"><a class="docs-heading-anchor" href="#Adding-new-tests">Adding new tests</a><a id="Adding-new-tests-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-new-tests" title="Permalink"></a></h2><p>We use Julia&#39;s built-in <a href="https://docs.julialang.org/en/v1/stdlib/Test/">unit testing capabilities</a> to configure tests. In general, newly added code must be covered by at least one test, and all new elixirs added to the <code>examples/</code> directory must be used at least once during testing. New tests should be added to the corresponding <code>test/test_xxx.jl</code> file, e.g., a test involving the 3D linear advection equation on the <code>TreeMesh</code> would go into <a href="https://github.com/trixi-framework/Trixi.jl/blob/main/test/test_tree_3d_advection.jl"><code>test/test_tree_3d_advection.jl</code></a>. Please study one of the existing tests and stay consistent to the current style when creating new tests.</p><p>Since we want to test as much as possible, we have a lot of tests and frequently create new ones. Naturally, this increases the time to wait for all tests to pass with each novel feature added to Trixi. Therefore, new tests should be as short as reasonably possible, i.e., without being too insensitive to pick up changes or errors in the code.</p><p>When you add new tests, please check whether all CI jobs still take approximately the same time. If the job where you added new tests takes much longer than everything else, please consider moving some tests from one job to another (or report this incident and ask the main developers for help).</p><div class="admonition is-info"><header class="admonition-header">Test duration</header><div class="admonition-body"><p>As a general rule, tests should last <strong>no more than 10 seconds</strong> when run with a single thread and after compilation (i.e., excluding the first run).</p></div></div><h2 id="Test-coverage"><a class="docs-heading-anchor" href="#Test-coverage">Test coverage</a><a id="Test-coverage-1"></a><a class="docs-heading-anchor-permalink" href="#Test-coverage" title="Permalink"></a></h2><p>In addition to ensuring that the code produces the expected results, the automated tests also record the <a href="https://en.wikipedia.org/wiki/Code_coverage">code coverage</a>. The resulting coverage reports, i.e., which lines of code were executed by at least one test and are thus considered &quot;covered&quot; by testing, are automatically uploaded to <a href="https://coveralls.io">Coveralls</a> for easy analysis. Typically, you see a number of Coveralls results at the bottom of each pull request: One for each parallel job (see <a href="testing.html#Testing-setup">Testing setup</a>), which can usually be ignored since they only cover parts of the code by definition, and a cumulative coverage result named <code>coverage/coveralls</code>. The &quot;Details&quot; link takes you to a detailed report on which lines of code are covered by tests, which ones are missed, and especially which <em>new</em> lines the pull requests adds to Trixi&#39;s code base that are not yet covered by testing.</p><div class="admonition is-info"><header class="admonition-header">Coverage requirements</header><div class="admonition-body"><p>In general, we require pull requests to <em>not decrease</em> the overall test coverage percentage in <code>main</code>, with a <strong>hard lower bound of 97%</strong>.</p></div></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="styleguide.html">« Style guide</a><a class="docs-footer-nextpage" href="performance.html">Performance »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.24 on <span class="colophon-date" title="Monday 17 April 2023 08:36">Monday 17 April 2023</span>. Using Julia version 1.8.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
